/***** DAY 4 *****/
/* https://adventofcode.com/2025/day/4 */
/* SETUP */

DECLARE @inp varchar(max) = '@@@@..@@@.@@@@@@@@@.@..@.@@.@...@@.@.@@@.@@..@@.@@@@@@....@..@@@.@@.@@@@@@..@.@.@@.@.@@.@@@@.@@@@..@.@@@@..@.@...@@..@..@@@.@@@@.@.@@@@
.@@.@.@@@..@..@@@@.@.@@@@...@@@@@@@..@@@.@.@@@..@.@@@@@@..@..@@@@.@.@@@.@@@.@@.@@@@..@@@@@@@...@@@@.@@@..@@@@.@@...@@@.@.@.@@@@.@@@..@@
@..@@@@..@@@.@@@.@@@.@@@@..@..@....@@@@.@.@@..@.@@....@@@.@@@@@@@@.@@@@@@@.@@@.@@@@@@@.@@@@@@@@@@@@@@.....@@.@@@@@@...@@@.@@.@.@@@...@@
@..@@...@@@.@..@@@@@@@.@@@@...@@@.@@@@@.@@.@@.@@..@@@@@@@.@@.@.@..@.@.@@@@@@@.@..@...@@@@@@@..@@@..@@.@@.@...@@@@@@.@@...@@..@@@.@@.@.@
@@@@@.@@@@.@..@@@@..@.@..@@@@@@@@@.@..@.@.@.@@@..@@@.@@@.@@.@@@.@@@.@....@@..@@@@@@.@.@@@..@.@.@.@.@.......@@@@@....@@@@@.@@.@@@@@.@@.@
@@@@...@..@@.@.@..@@.@.@@@.@@@@@.@@@@.@@.@.@@...@@..@..@..@@@@@@@@@.@.@@@@@@@.@.@.@@@@@.@..@@@@...@..@@@.@..@..@@@@@..@@@@@@@.@@.@@@@@@
.@..@....@@@@@@@@@@@@.@@@..@@@.@.@@@@@@@.@.@@.@...@@..@.@@.@@@@@..@.@@@.@..@@.@.@....@@.@@@@@.@@@@@.@@@..@@@@.@.@@@@..@.@..@@@@@.@@@@@.
@@@.@@.@..@.@@@@@.@..@@@@.@..@@@@@@@..@@@.@@@@.@@@....@@@@.@..@@@.@.@.@@.@.@@..@@.....@.@.@@@.@@@@@@@@..@@@@@@@@.@.@@@@@@.@...@@@.@..@@
@.@.@.@@...@.@@@.@...@.@@@@@.@@@.@@@..@@@.@..@@.@@@@@@@@@....@@@@@@@@@@@@.@@..@@.@@.@..@.@@.@.@@@.@.@@@@..@@.@@..@..@.@..@@.@@@..@@@..@
@@@.@@@@@@@@@@@@.@@..@.@@@.@.@@.@..@.@@@@@....@@@@.@.@@@.@@.@@@..@@.@@@@@@.@@@@.@@@@..@.@@.@@.@@.@@@.@@@@.@.@@@@.@@.@@@@..@...@@@@...@@
@@@@@@@.....@.@@@.@@..@@@.@@@@@.@@@@@@@@@@@.@@@.@..@@.@.@@.@.@@@@..@@...@@@@@.@..@@@@@.@...@@@@@@..@@@.@.@.@@@@..@.@@@@@@.@@.@@@..@@.@@
..@@@.@@@.@@@@@@@@.@@@.@@..@@@@.@.@@@@@@@@@.@@@@@@@@@...@@@...@@@..@@@@@@.@@@.@@.@@@@.@@@.@@.@@@@..@@.@@@@..@@@@.@.@@.@..@@.....@@@@@@.
@@@@@@@@.@@..@..@.@@@@@@.@@@@@..@@@..@@.@@@@@.@.@@@.@@@@@.@@@.@..@@@@@@@@@.@@@@.@@@@.@@@@@@@@@@@@@.@..@@@@@@.@@@..@..@@..@.@@@@@.@..@@@
@@@@@....@@@.@.....@@@@.@@@@@@@@@.@.@@@@@@.@@@@@..@@@@.@@@@.@@@.@@@@@@@.@@.@.@...@.@@.@.@@@@@.@@..@@.@@@.@@@.@@.@...@@@@.@@@...@@@@@@@@
..@@@@.@@@.@@@....@@@...@@@@@@@.@@@.@@.@@@@.@@...@@.@@.@@@.@@@@@@@..@@...@.@@.@.@...@.@@.@@@@@@@@.@@.@@@@.@@.@@.@@@...@...@.@@@@@.@....
@@.@@@@..@@.@..@@.@@..@@@@.@@.@@@.@.@@@@.@@@@@.@..@.@@.@@.@@..@@.@.@@@..@@@@.@.@@@@.@.@@@.@@@.....@..@@@@..@..@.@@@@@.@@@.@..@@@.@@@@.@
@@@@@@@.@@@@@...@@.@.@.@..@.@@@@@@@@.@@@@.@@@.@@@...@@.@@.@@@.@@.@..@@@@.@.@@.....@@@@@@@@@@@.@@@@..@@@@....@@@..@.@@..@@.@..@.@@@@@@..
@..@@..@@@...@@..@.@..@@...@..@@@..@@@@@.@@@@@@.@.@@@@.@...@...@@@...@@@..@@@@.@@@@@....@@@@@@.@@@..@@@@@@.@@..@@@@@@@@@@@@.@@@.@@@@@.@
...@@@@...@.@@@@@.@.@@@.@@@@@.@@@@..@@.@.@@@@..@@.@@@@@@@@@@@@@@@.@.@..@@.@.@@@@@.@.@@@.@@..@@@......@@@.@@.@@@@@@.@@@@@@@@@@.@....@@@@
.@@@@.@@@@@.@@@.@@....@@@.@@@@@@.@.@@.@@@.@@@@..@..@.@@..@..@.@@@@@.@@.@.@@@@..@@@@@@@..@.@@@@@.@@...@@.@.@@@.@@@@..@@@@@@.@....@...@@@
.@@.@...@@@@@..@@..@@@.@...@@@@...@..@..@.@.@.@@..@@@@@..@.@.@@.@..@@@..@@@.@@.@.@@@@@@@@.@@@.@@..@@@@.....@@@@.@.@@@@@@@.@.@@@.@@....@
.@@@.@@@.@.@.@@@@..@@@@@@@..@@@.@@...@@@.@..@@..@@..@@@@..@.....@@@@.@..@.@@.@..@@@.@@@@@.@@@@@.@@..@@@.@@.@@@@.@@@..@.@@.@.@@@@..@..@.
.@..@..@@@@.@@.@@...@.@@@@@@.@....@.@@@@...@@@@@@@.@.@.@.@..@..@@.@.@..@.@@@@@@@@@.@@@@@@@@.@@.@.@@@@@.@.@@@..@@@@.@@@@@@@@.@@..@.@@...
.@@@@..@@@.@@.@..@@@@@@@@@@@@@..@@...@.@....@..@.@@@..@@@@@@@@@@@....@@.@@.@@@@@@@.@.@@@@@@@@.@@@@@@@@@@@@@@@.@..@@.@@.@..@.@@@@@@.@@@@
..@.@@@@@@@..@@.@.@.@@@.@.@..@@..@@@@@@@...@..@@@@.@@@@@.@@.@.@@@@..@@@@@@.@@...@.@...@@...@@@@@.@.@@@@@.@@@....@@.@@.@@..@@@@@.@@@@@.@
@@@@@@.@.@@@@@@@@@@@@.@@@@@.@..@@@.@.@@@@@@@@@@@@@@.@@.@.@@.@@@@@@@@...@@@@@@@.@@@@..@...@..@@@@@@@@.@...@@@@@..@@.@@@@@..@..@@@.@@@@@@
@@.@.@.@@..@@@..@@.@@@@@.@@..@@@@...@@@@.@@@.@@..@.@@@@@@@...@@@@..@@@@.@@.@@@@.@.@.@.@@...@.@.@@.@.@.@@@@@.@..@@.@@@@.@@@.@@.@@.@.@.@@
@@...@......@.@.@@...@@@.@@@.@@.@@.@@..@@..@@@@@.@.@@@@.@..@.@.@.@@@@@@@.@@@@@@@.@@@@@@@@@@.@@@@@.@...@@@...@@@@@.@@.@.@.@.@.@@@@.@@.@.
@@@@@@.@@.@..@.@@@@.@@@@@.@@.@...@.@@..@.@@.@@..@@@@@@@@@@.@@.@.@@@@@@@@@.@@@@@@.@.@@@@...@@@@.@@@..@..@...@...@@@@@@@@.@.@@.@@.@@@..@.
....@@.@..@...@..@@@@@@.@..@@@@@@@@@..@@@@@@.@.@.@@@.@@@@@.@....@@@.@.@@@@@@@.@@@@@@..@@..@@@......@@..@@@@@@@@.@@..@@...@@@.@.....@..@
@@@.@@@@@@@@@..@.@@@@.@@@@..@@@@@@@@.@@.@@@@@..@@@@@@..@.@@@.@.@@@@@@@@@@.....@@..@.@@@@@@@@@@@@@@...@@.@@@@.@....@@....@.@@..@@.@.@@@@
.@@..@@@@@@.@@@@.@@@@..@@@@@@..@.@@@...@@.@@.@.@@@.@@@@..@@.@@@@..@@@.@@.@...@....@..@@@.@@@..@@@@@@@...@@@@@..@@.@.@@@@@@.@@@@@.@@.@@.
...@@@.@@.@@@@@....@@.@.@@@@@.@@.@@@...@.@@.@.@...@@@....@@@@.@@@@@@@@@.@.@.@@@.@@@@@@.@@@.@.@.@..@@@@@..@..@@@@@@@@.@.@@.@@@@@@.@@@@.@
@@@....@...@@@@@.@...@@@..@@....@@....@@@@.@@@@@@...@@@@.@@@@@@@.@...@..@@.@..@@......@@@@.@@@.@.@@@@..@@.@@@@.@@.@@.@@@@@@@.@@@@@@.@.@
@@@@@...@@.@...@@@...@@@@.@.@.@@@.@@...@@@..@@.@..@..@@@@@@@@.@@@.@.@..@.@..@@@@.@.@@@@@.@..@...@@...@@.@.@.@@.@.@@..@.@@@....@..@.@@@@
@@.@@@@..@@@@..@..@@@@.@.@@@@...@@@.@..@.@@@..@@..@.@....@@@@@@@.@@@@.@@@@@@@@@@@@@@.@..@@@@@...@.@....@@....@@@.@@@@@@@.@.@@@@.@@.@.@@
@.@.@@@..@@.@..@..@@@@.@.@@..@..@@.@.@@@.@.@.@.@@@@.@@.....@.@@@@.@..@@@.@@@@.@@@@@@@.@@@@@.@@@...@@.@@...@@@@@@@@@.@@.@@.@.@@.@@@@@@@.
@@@..@@@@@@@..@@.@..@.@@.@.@@.@@.@@.@@.@@@.@@..@@@@@@.@@@@...@.....@@@...@@@@@..@@..@.@@@.@.@@.@@@@.@@@@@.@@@@.@@.@@@@.@@@@@.@@@@@@.@.@
.@@@@..@..@.@...@.@@@@.@.@..@@@@@.@.@@.@....@.@@.@...@@@@@@@.@@@...@@@@..@@@.@.@@@@@@.@.@@@@@@@@@...@@@@@@..@@@..@.@@@@@.@@.@@@@@@@@...
.@@.@@@@@@.@..@.@@@@@@@.@@@.@.@@@..@@..@@@@@.@.@..@@.@@@@.@@@.@..@@@@@@.@@...@@@..@@..@.@.@..@@@@@@.@...@@@.@@@.@@..@@@...@..@...@@.@@.
.@@@@@..@.@...@@...@@@.@@@@@@@.@@@@@@@@.....@@@@@@@@@@@.@.@.@.@@@@.@@@.@.@..@@@@@@.@@@@@@....@@.@@@@.@@@@@@..@...@@.@@@@@@@.@..@@@.@@@@
..@@@@@@@@@.@@.@@@.@@@@@@@..@@@@@.@.@@@@@@....@..@..@@.@@@@.@@@@@@@@..@@@..@@@.@@@@@@@@.@.@.@@@@.@@@@@...@@.@@@@@..@@@@@@@@@@..@..@@@@@
@@@@@@@..@@.@.@@..@.@@@@.@@@@@.@.@@@@@@.@@@.@@.@@@@@@@@..@.@.@@@@.@@..@@.@@@.@@.@@@@@....@@@.@.......@...@@@@@..@@@...@@.@@.@@.@.@@@@@.
@@@..@.@@@....@.@@@@@@@@.@@..@..@..@@.@.@@.@.@@@.@..@@..@.@.@.@.@@...@@.@.@@.@.@@....@.@@@.@@@@.@.@@@@@@@..@.@..@@@..@..@@..@@@@@..@@.@
.@.@.....@.@@@..@@.@@@@@@@.@@.@@.@@@@@@@@.@@@@..@@.@@..@@..@.@.@@@..@@.@@@@@@.@@...@..@@..@.@.@.@@@.@@.@.@@@@@@.@.@@.@@@..@@@.@@..@.@@@
@...@@..@@.@..@@.@..@@@...@@@@@@.@@.@..@@.@@.@@@@@@@@..@@.@@.@.@@.@@.@@@@@.....@@@.@@..@@@@.@.@@@@@.@@.@@..@@.@.@@.@@.@.@@@@@@.@@@@.@@@
@@@@.@...@.@...@.@@@@@@@@@...@...@@@.@@@@@.@@@@@@.@@.....@@.@..@.@@@@.@@...@.@@@@@.@@@@@@@@@..@@@@@@@..@......@@.@@.@.@@..@@.@@@@@@.@@.
@@.@.@@@@@.@@@.@@@@@.@@@@@.@.@..@.@@...@@....@.@...@@@...@.@..@@@@.@.@@@@@@.@.@.@.@@@@@@..@@.@@.@@...@..@@@.....@.@@.@@@@..@@..@@.@.@@.
@.@@@@@.@.@@@@@.@@@@@@.@.@@@.@@.@....@....@@....@@@@@@@.@@@@@.@@@@@...@@.@@@@.@@@.@@...@@.@@.@@..@@@@.@@@@@.@.@.@..@@@@@@.@@@@@.@.@.@@@
@@.@@@@@..@.@@..@@@@@.@.@@@@@@@.@...@.@@..@..@@..@@@@@.....@@.@.@@.@@@@.@..@@..@@@.@....@.@.@@@.@@@.@@.@@.@.@@@@.@@@..@....@.@@.@.@.@..
@@@@@.@@.@@@@@@@@@@..@@..@@...@.@...@@@@.@.@@@@@@@@@@@@.@@.@...@..@@.@@..@@@..@.@...@@...@@..@@@..@..@@..@@@.@....@@@...@@@.....@.@@@@@
@@@@@@@.....@.@@.@@@@@.@@@@@..@@@.@@..@@@@@..@@@.@..@..@@@@@@@@@@@@.@@@.@.@@@@@..@@@@...@@@@@.@@@@@@@@..@@.@..@.@@....@..@.@@..@@.@@@@@
.@@.@@@@@@@.@.@@@..@.@@@.@.@@.@@@.@.@@@@@@@@@@@@@@@..@@@.@@.@@@@@..@@.@.@@@.@@@@@@@.@@.@.@@...@.@@...@@@.@.@..@.@@.@.@@@@.@@@@@.@@@...@
@@@@@@@.@@@..@@.@.@@@.@@@@@@@@@..@.@.@@..@@@@.....@@@@.@...@@@.@@@..@@..@@..@@.@@@..@@.@.@@@@.@@.@@@.@@@.@.....@@@.....@@@@@@@@@.@@@@@.
@@.@..@.@@.@@......@@..@@@..@@...@.@@@@@@.@@.@@.@..@@...@@..@@@.@..@@@@@@.@.@@...@.@@@.@@@@.@@..@@@@@@@.@.@@@...@..@.@@@@..@@...@@@...@
..@@@@.@..@@....@.@....@@@@@.@@..@@@@@.@..@@@@@@..@@@@@@@.@.@@@.@@.@@@@@@@..@.@@@@.@..@@@@@@@...@@@..@@@@@..@@@.@@..@@.@.@@.@@.@@@.@.@@
@@.@@.@.@@@.@.@.@..@@....@@@@@.@@@@.@@@@.@@@@.@@@@@@.@@@@...@@@@.@@..@..@@@@.@@@@..@@.@.@.@@@.@.@@@@@.@..@@@@.@.@@.@@.@@@@@@@.@@@@@@..@
@@.@@@.@.@.@@@.@@.@@@@..@@..@@@@@@@.@@.@.@@.@@@.@..@@@..@@@@@@@@..@@@@.@@@@.@@@.@@.....@@..@@@@@@@.@@.@.@.@@@@@..@@.@@.@@@@.@@.@@@@...@
@...@@@@.@@@@@@..@...@@@@@.@@@.@@@..@.@@.@@@..@.@@@@..@@@@..@.@@.@.@@@.@.@@...@..@@.@.@.@@.@.@@@@.@@..@@@@.@@.@@..@.@@@.@@@.@@@@@@@@@@@
.@@@.@@.@...@..@.@@.@..@@..@.@@@@@@..@@@.@@@..@..@.@@@.@@..@@.@.@@@.@@@.@.@.@.@.@@.@.@..@.@@@.@@@@@@.@...@.@@@.@@@.@.@.@.@@.@@..@.@@.@.
@@@@...@@@@.@@.@.....@@@@@@.@..@@@@@@@@@@.@..@.@@@@..@@@@@..@@.@.@@@@@..@.@@...@.@.@.@@..@@@@@.@..@@.@.@@.@.@.@@...@@@@@.@@..@@@@.@@.@.
@.@@@.@.@..@@.@.@.@.@.@@@@@@.@@@@@@@@@.@@@@.@@@@.@@.@@@..@@@@@@@@@@@@@.@@@@@@..@.@@@.@..@@..@@@@.@@.@..@.@@.@@@@@@@.@.@@@@@.@.@@@@@..@@
@.@@@@@@.@.@.@@.@.@@..@@@..@@.@@@..@@@@@@...@.@..@@@@@@.@...@@@.@..@.@@@@@@@.@@@@..@.@@.@.@..@@@@@@.@@@@.@.@@..@...@.@@.@@@.@.@@@.@@.@.
@.@@..@.@.@@@@@@@@@..@@@@...@@@@@@@.@@@.@@.....@.@....@.@@.@@@@@...@@@...@@..@@@....@@@..@@@@.@..@.@.@.@@@.@@@@@.@..@@.@.@@@@@@@@@.@@.@
@@@@@@@@@@@.@@@@.@@.@@.@@@@.@@@@......@@@@..@@@.@..@@@.@@@.@..@.@@@@.@@..@@@.@@@....@.@@@.@..@@@@@.@@..@@@.@@@@@.@@@@@.@@@@@@@.@@@@@@@.
@.@@@@.@@.@.@@@@@@@@@.@@@@@@.@@@.@.@@@@@@@.@@.@@.@....@@@@@.@@..@@@@.@.@.@@@@.@.@@.@@..@@@@@.@@@@@@@.@....@@@@@@@.@.@@@@..@.@@@@@@@@@.@
@..@.@.@@@@@@@@..@@@@@@.@.@@@@@..@@@.@.@..@@@.@.@.@@@.@@@..@@@@@.@@.@@@@@@.@@.@@@@@.@@.@..@@.@@@..@@@@@@@..@@.@..@.@@@@@...@@.@@@@@@.@@
..@.@@@@@@.@@@@@.@.@.@.@@@.@@@@@@.@.@@@@.@..@@@.@@.@@..@@@@@@@@@@@.@.@@@.@@@.@@.@@.@@@.@@...@@@@@@@..@.@@@@..@@@.@@@@.@@@@@@@@@@@@@.@@@
.@.@@.@@@.@@.@@.@@@@.@@..@@.@@@@@@@@@.@.@.@.@@@@@.@@@..@@@..@.@@@@@@@..@.@..@.@@@.@.@@.@.@...@@..@@@.@@....@@@.@@@@.@@.@@.@@@...@@@@.@@
@@@@.@.@@@.@.@...@@@@@.@.@@..@..@@.@@@.@@@@.@@.....@.@.@@@@....@@.@@.@@@@@.@@@@@@.@@@@@.@@@...@.@.@@.@..@@@@...@.@@@@@.@@@@@@..@.@.@@@.
...@@@..@.@@@...@@@@@@.@..@.@@@..@@.@@@@@@.@@@@@.@@.@@.@.@.@.@..@@@@@.@@.@.@..@@@@@@.@@@@@@.@@.@.@@@@@@.@.@.@@@@@@@..@.@@@.@@...@.@...@
@@@@.......@@..@@@@@.@@.@.@@.@@@.@.@@@@@.@.@..@.@..@@@@@@.@@@.@.@@@..@@.@@...@@@@...@..@@@@.@@..@@@@@@@.@@@....@@.@@@@@@.@@@@@..@@@@@.@
@.@.@@@..@@@@@@...@@.@@.@.@.@.@...@.@..@@@@@@@.@.@@@@@...@.@@@@@.@..@@@@@.@@@.@.@@@@.@..@.@@@@.@@@@.@@@@.@@@.@@@@@.@@@@@..@@.@@@..@.@@@
@@@@.@...@@.@@@@@..@@@..@.@@@.@@..@@..@@@@.@@..@@@.@.@@.@@..@.@@@@@@@@@@.@@@@.@@....@..@@.@@..@@.@....@..@@@@@@.@@.@.@@@.@@@.@.@@@.@...
.@...@.@@.@@@@.@@@@@.@@@@.@.@.@.@..@....@@@@@@@@@.@@.@@@@.@...@@@.@@@@@..@..@..@@@@@@.@.@..@@..@.@@@..@@@.@..@@@@.@@....@@@@.@@@@.@@.@.
.@.@.@..@...@.@@@@@.@@@@@@@.@@@@@.@.@@.@.@.@@.@@@@@@.@..@.@@@@.@@.@..@@@@@@.@@.@@@@@@...@...@@@@..@@.@@.@@.@@@.@@.@@@@@@@@@.@@.@@..@@.@
@.@@@@@@@@@@@.@@..@@@@@..@.@.@@@..@@@@@.@.@@@@@@@@@@@.@..@@@.@..@@@.@@@@@@.@..@.@@.@@@@.@@..@.@..@..@@@.@@@@@@@@@@.@@.@@@@@.@@@@...@@..
@@.@@@.@.@..@@@@@@@@.@..@@@..@.@@@@@.@@@@@..@@..@@.@@.@.@@.@@@@.@.@.@.@@@.@.@@.@@.@.@.@@.@@@@..@@..@@.@@@@.@..@@@.@@.@@@@@.@@@@.@..@.@@
@@..@.@.@@.@@..@@@..@..@@.@@@..@@@@@.@@@@..@@@.@...@@@.@..@.@@.@@..@@@.@@@@@@.@.@@@.@@@@@.@.@@@.@.@@@..@@@.@@@.@.@@@...@@@@@.@.@@@@..@@
.@@.@.@@.@...@@.@@@@@.@@@@@..@@@.@@@..@@.@@@.@@@@..@@@.@@@.@.@...@@@@@.@@@@@.@@..@@.@@@...@@.@@@.@@.@@@@.@@...@@@@@@@@.@@@..@.@@.@...@.
..@.@.@@.@.@@@.@@@@.@@@.@@.@@.@@@...@.@.@.@@@@@@@@@..@.@@.@@@@@.@.@@@.@@@@@@.@@@.@@..@@.@..@.@..@@@@.@@.@@@@.@@..@@.@.@@@@@@.@@.@.@.@.@
@.@@@@@@..@@.@@.@..@@.@..@.@@..@@@..@.@@..@...@.@@@@@.@@@@@..@@.@@@.@.@.@....@@.@@@.@.@@@@.@@@@@.@..@.@@.@.@..@@@@.@.@..@.@@@.@.@@@.@@@
@..@.@@@@@@..@@@@@.@@@.@@@.@.@@.@..@@..@@@...@.@@@.@@@@.@@.@.@@.@.@@@@..@@@@@..@....@@@.@@@.@@@@@@@@@@@.@..@@@@@@@@@@@.@..@.@.@..@@@@..
.@.@.@.@.@@@.@@@@@@.@@..@@@@@@@......@.@@@.@.@..@@@.@.@@@@.@@.@.@..@@.@@.@@..@..@@@@@.@@@@@..@@.@@@@.@@@.@@@...@.@@@@@@..@.@@@.@.@@@..@
@@@@.@@..@.@@.@@@..@.@@@@.@.@.@.@.@@@@....@@@.@@@.@.@.@@.@..@...@.@@.@@@...@.@@..@..@.@@@.@.@@@..@@.@.@..@@@@..@@@.@.@@@@@.@@@.@..@@@..
@@@@.@@..@@@@@.@..@@.@@..@.@@.@@.@@.@@@.@@@@@@.@@@@@.@@.@@.@@@@.@@@@@@.@..@.@@.@@@@...@.@@@@@.@.@@@..@@....@@.@@.@@@@.@@..@@@.@@...@.@.
@.@@.@.@@@@@@.@.@@@@@@@@@.@...@@@@.@@.@@@@@...@@.@@@.@@@.@@.@@@..@@@@.@.@@@@@@@@.@...@.@@@.@@..@@@.@......@@@..@@.@@.@@@@@.@@@@@@.@@@@@
..@@@@@@..@@@...@.@@.@@@@@@@.@@@@@@.@@..@.@@@.@@...@@.@@.@..@@..@@@@.@@..@@.@.@@@@@@.@@@@@@@@.@@.@@@@@@@@@.@@.@@.@@..@@.@@.......@@..@@
@.@@.@@@@.@@@@@@@...@.@@@.@@.@.@.@@@@.@@@@@.@@..@@@@.@..@@@@@@...@@@@@@@@@..@@@.@@@...@@@.@..@@@@@@.@@.@.@..@.@@.@@@.@.@@@.@@@@@@.@.@@@
..@@.@@..@..@@@@@..@@@@@@@.@@@.@@@.@@.@..@..@@.@.@....@@.@.@.@@@.@@..@@@.@@@@@@@@@@@@@.@.@...@@@.@@.@@..@.@.@@@..@@@@@.@@@@...@@@@@@@@@
..@.@.@.@@@@@.@.@@@@.@...@@@.@@@@@@...@@.@@.@..@..@.@...@...@@.@..@@.@..@@..@.@@.@@..@@@@@@@.@@@..@.@@@@@@@@@@@..@@@.@@@..@@@@@.@@@@.@@
@..@@.@@@.@.@@@@.@@@@@..@@@@@@.@@@@.@@@@@.@@@.@@.@@..@@@@@..@@@@@..@@@@@@@@@.@...@@@..@@.@@@@@@.@.@@.@..@.@..@.@@..@....@@@..@@@@.@@@.@
..@@@@@.@@@@@@@@..@@@.@@@@.@@@..@@.....@@.@.....@@@..@.@@@@@@..@.@@@...@@@..@.@@@@@@@@@@.@.@@@..@@.@@.@.@@@@@@..@..@.@..@.@..@.@.@@@@..
@@.@@@.@..@@.@@..@@...@@@.@@@@@@@@@..@@.@@@.@.@@...@@@@@.@@.@@@@...@@..@@@...@..@@@@@@...@..@..@.@@.@@@...@@@@@@..@@@@.@@@...@.@@@.@@..
@...@@.@@.@@@.@@.@@@@@@@@@.@@.@@@@.@@@.@@.@.@.@.@@@@@@@@.@.@...@@@@@.@@.@@.@@@..@@..@@...@@@@@.@..@@@@....@@@@.@@@@@..@@@@@@@..@@......
.@.@@..@@..@@@@@@.@.....@@@@@.@.@@.@...@.@.@@@.@@@.@..@@...@@@@@@.@@@@@...@..@@@@@@@@.@@@..@@@@@@.@@@.@..@@@@@@@@.@...@@..@@@@@....@@@.
@@@.@@@@.@..@@@.@@@@@@.@@.@@.@.@...@@@.@@@@.@@@@@@..@@@.@@@@@.@@@..@@@@@.@..@@@@@@@..@@@@...@@@..@@@@@@@@@@@@@.@.@@.@@@@.@@@........@..
@.@@@@.@.@@@@@@@@@@@@.@@.@@@...@@.@@@.@.@.@@@@@@@@@@@...@@.@@.@@.@@.@.@@@@.@@@.@.....@@@@..@...@.@.@@@..@@@..@@@@..@@@..@.@@@@.@.@.@@@@
@@.@@@.@@@...@@@@@..@.@@@...@@@@@.@@..@.@.@.@@@@.@@.@@.@@@@@@@@@....@@@@@.@@.@.@@@@.@.@@@....@@@.@@@@@.@@@@.@@.@@@....@@..@@@@@..@@@@.@
@...@@@.@..@@@.@@@@.@@@.@.@@..@@@@..@.@@.@.@@@@@.....@@@@.@@@@@@..@@@.@@.@@@@@@@..@@@@.@@@@@..@@..@..@@@.@@@@.@...@@.@.@.@...@@@@.@@.@@
@@.@@@@.@@..@@@@@@@@@@@.@@@@.@.@.@@@.@@@@@@.@@@@.@......@@@.@@@@@@@@..@@@@@@.@@.@@@@@...@@...@.@@@..@.@@@@@@.@@@@.@@@@@.@.@@@@@.@@@@@@.
@..@..@@.@..@@....@.@@@..@@@.@@@@.@@.@@@@@@@@@@..@@@@@@@@@@@@@..@@@@@.@@..@@@@@.@@@@@@@@@..@@.@@@..@..@@@....@@.@.@@@@@@@...@..@@.@@@.@
...@@..@@..@.@@@@@@@@@@.@@.@@@...@@@@.@@@.@@.@@@@....@@@@@.@.@@.@.@@.@..@.@@@@@@@@@@@.@@@.@@@@..@@@..@@.@@.@@@@.@.@@@@@@@@@.@@@@.@.@@@@
@@@@@@..@@@@@@..@@@@@@.@@@.@@.@.@.@@@@@.@@..@@@@@...@@@@.@@@@@@..@.@@@@@@@@@@@.@@@.@@.@@@@@@@@..@@@.@@@@..@.@@.@.@@..@@.@@@..@@@@@..@@.
..@@...@@@@.@..@@@.@@.@@@@@@@@@@.@@@..@@.@@@.@.@@.@@.@@@.....@.@.@@.@......@.@.@@@.@@@@@@@@....@@@@@@...@..@@.@@@@...@@@@@.@@@@.@@@@.@.
.@@@@.@@...@@.@@.@..@@@@..@@.@@@.@@@@@@..@@@@@..@@@@@..@.@@..@@@.@.@.@@@.@.@@....@@@@@@..@..@@@@.@@@@..@@@@@@.@.@.@.@@.@@..@@...@@@@..@
@@@@@.@@..@.@@@@@@...@....@.@@@...@.@@@@.@.@@@@@@@...@@@.@@.@@.@@@@.@.@@..@..@.@.@@@...@@.@.@@.@..@@...@@@.@@@.@@..@@.@@@@@.@.@@.@@.@@@
@.@.@.@@@@@.@..@..@@.@..@@.@@@@@..@.@.@@@@@..@@@@.@.@@@@.@@@.@..@@@@@@@@@@@@@.@@.@.@@@.@@@@@@...@@@.@@.@@@@@@.@@@.@@.@@@..@@@@@@@@.@.@@
@@@..@.@.@@@.@@..@@@@.@@.@@.@@@@....@@..@.@@@@..@.@.@.@.@.@@@@@.@@.@.@@..@.@.@.@@@@@@@....@@@@.@..@.@@.....@@@@@@@@@..@..@@.@....@@@@@.
@......@@@@.@@@@.@...@..@@....@.@...@..@@@.@@.@@@..@@.@..@.@..@@.@..@@...@..@@...@@@@@@@@.@.@@@@@@@..@@..@..@.@@...@...@@@.@@@@@.@@.@.@
.@..@@.@@.@@..@@@.@.@@@@@@@@@@@@.@@@@@@.@@@@@@@@@@@@@.@..@@.@@@@.@@@@@.@@@.@.@@@@@@@..@@@@.@@@@...@@@..@@@@.@.@..@@..@@@@@.@@@.@@@.@@@.
.@@@@..@.@@@@@...@@.@@@.@..@@@@@@@.@@@.@.@.@@@@@@@@..@@@@.@@..@@@.@@..@@@.@@....@@@@@@@@@@@@.@@@@.@.@@@@@..@.@@@@@@@@@@..@@@..@@@.@.@.@
@@.@@@@@@@@@@@@.@@@.@@@@@@@@.@.@.@@@@@@@@@.@@.@@@@@..@@@@@@...@@@@.@@..@@.@@@@@.@@...@@@@@@.@.@@@@@@@.@.@@@@@..@.@.@@@@.@.@@.@@.@@@@..@
@@@.@.@@...@@.@@@@@.@@@@@..@@@.@.@@..@@@.@@.@..@@.@.@.@.@.@@@@@@@@@@@@@@@..@@@@@@@..@.@@@@@@@@.@@.@@@..@@.@.@@..@@.@@@..@@@.@@@@...@@.@
.@@@...@@@.@.@@@@@@@@.@..@@...@@.@@..@...@@@.@@@@.@@@@@@@@@.@@.@@.@@..@@@.@@@@.@.@@@@@@@@@.@..@@.@.@@@@@@@..@@@@@@.@..@@@.@@..@.@@@@...
..@@.@.@@@.@@@@@@@@.@@@@@@@@@@@@@.@.@@.@.@..@@@@..@@@@.....@@.@@@@@@@...@@@@.@@@@@.@@..@@@.@@@@..@@.@@.@@.@@.@@.@.@.@@.@@@@.@@@@@..@..@
.@@@@@@@@@@@@@.@@@.@@@@.@@@@.@@@.@@..@@@@@.@@@@@@...@@@.@@.@@..@...@@@@.@@@@@.@@@@@@@@@@@@@@@.@@@..@@@@@..@@..@.@.@.@@@..@@@...@@..@@..
@.@...@@@@@@@@@@@@.@@@@@@@@@@@@@.@@@.@.@@@@@...@@.@@@.@@@@.@@...@@.@.@@@..@..@@@@@.@@.@..@.@@.@@@@@@@..@..@.@@@@@@.@@@.@@...@@@.@@@@@@@
@@.@.@@@..@.@@@@.@@@@.@@@@.@.@..@@....@@@@@@@@@@.@@.@@@@@.@..@.@@.@@@@@@@@@@@@@@@.@@@@..@@@@@.@@.@@@.@@@..@.@@.@@@@@.@@@.@.@.@.@@.@@@..
.@..@@@..@.@.@.@.@@@@@@@@@..@..@@@@@@@.@@@.@..@.@@......@.@@@.@@@@@.@.@@.@...@@@@.@@.@@.@@.@.@@.@@@@@@.@@@@...@@@@@.@.@@.@@@@@.@@.@@@.@
@@.@.@@.@@@@@@@@@@@@@...@.@.@@@.@..@@.@@.@..@@@@..@@@@@@@@@..@.@@@.@.@.@@..@@@@@.@@@....@...@@@@@@...@@@@@@@@.....@@@@..@.@@.@.@@@..@@@
@.@@@@@..@@@@..@.@@@@@.@.@.@@.@@@@@@.@@@.@@@@@@.@.@@@.@.@@@@.@@.@@@@@.@@@@.@@@@@@@@.@@...@@@@@@@@@@@.@@@.@@..@@@@.@@.@@@@.@@@@@@@@@@@@@
.@@@..@..@@@@@@@@@@.@@@@@.@.@..@@@.@.@@@@@@.@@@@@...@@.@@@@.....@.@...@...@@@@@@@@@@.@..@@@@@..@@@@.@@@.@@...@.@@@@@@@....@@@@..@@.....
@..@@..@.@@..@@@@@..@.@..@.@.@.@@@@.@@@.@.@@@.@@@@@.@@@@@.@.@@@.@.@@@.@...@@@@@.@.@@@@...@.@@@.@.@@.@.@.@@@@@@@@@.@@@@@@.@...@@@@.@.@@.
@.@.@@@@@@@@.@.@@..@..@@@@@.@@@@@@...@@@@..@@..@@@@.@@.@@.@@.@...@@...@..@.@@@.@.@.@@.@.@@@@...@@@@@@@@@..@@@@..@@@@@@@@......@@@...@..
@@.@@@@@.@@@@..@@.@.@@@..@.@@@.@@@@.@@@@@@@.@.@@@.@@@....@.@@@@@@..@@@.@.@@.@.@@.@@@@..@@@@@..@@.@@@@.@..@@.@@@@@@.@@.@.@..@..@.@@..@.@
@@..@@@.@..@..@@@@@.@@.@@@@@@.@..@..@@@@..@@...@@@.@@.@@..@@@@.@..@@@..@@@..@@@..@@@.@@...@@@@.@@@@.@@@@...@@@.@@@.@..@@@.@@.@@@.@@@@@@
.@.@.@@@@@@@@@..@@@@@@..@@.@..@@..@@@..@@@@@.@@@.@@.@.@@@@.@.@@@@@@@.@@@@@.@@@@@@@@..@..@@@@@@@@.@@@.@...@@.@@@.@@.@@..@@@@@@@@@@@@..@@
@..@..@@@@.@.@.@.@.@....@.@@@..@@@@@@.@@.@@..@..@..@@.@..@@@@@..@@.@@@@@..@@@@@@...@@..@@@@@.@....@@@..@.@.@.@.@@@@.@.@@@.@..@@@@@.@.@@
@@...@@@.@@.@.@.@.@@.@@@@.@@@@@@@.@..@@@@@@@.@@@.@.@@@..@.@@.@@@@.@.@@@@.@@@...@@@@@@@@@.@@..@@@.@.@.@@..@..@@.@@@@@@..@.@@.@.@@.@.@.@@
@@@@..@...@..@@..@.@@@...@@@@@@@@.@@.@..@.@..@.@@@.@@.@@@@..@@@@@@@..@@.@@@.@@.@.@@@@@@.@@.@@@@.@.@..@@@@@@@@@@.@.@@@@@@.@..@.@.@@@.@.@
@.@@@@@@@@.@@@..@.@.@.@@..@...@....@@@..@@@.@@..@@@..@@@@@@@@.@@....@@@@@@@@..@.@@@..@.@@@.@@@@...@@@..@@@@@.@@@@@.@.@@.@@..@@@@...@.@@
@@.@..@..@@@@...@.@@.@@@..@.@@@...@@..@.@@@@.@..@...@@@@@.@.@@@.@@@@@@.@@@@@@..@@...@..@@@@.@.@.@.@..@@@@.@@.@..@.@@@@@@..@@@@.@.....@.
@.@.@@@@@@@@.@@..@@.@.@@@@@..@@.@@@@@.@.@.@@@..@....@@@@@@@@@@@@.@@@.@@.@.@@@@.@@@@.@...@.@@.@...@@.@.@@@@@@.@.@@@@@@...@.@@.@..@@.@..@
@.@@.@...@@@.@.@@.@@@@@@@@.@@@@@.@@@@.@@.@@@@..@@.@@...@@.@@@@@@.@@.@@.@@@@@.@@.@@.@@@.@@.@.@.@.@@.@.@@.@.@@@@@@.@..@@.@@.@..@@@..@.@@@'

/** TEST **/
/*
DECLARE @inp varchar(max) = '..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@.'
*/
--SELECT  @inp

DECLARE @CRLF varchar(10) = char(13) + char(10) ;
DECLARE @inStr varchar(max) = REPLACE(@inp,@CRLF,'|')

--SELECT @inStr

/* Instructions table. */
DROP TABLE IF EXISTS #tmpInstructions
CREATE TABLE #tmpInstructions (id int identity, instr varchar(max) )

INSERT INTO #tmpInstructions (instr)
SELECT value FROM STRING_SPLIT(@inStr,'|')

--SELECT * FROM #tmpInstructions

/**********************************************************************/

/*** COMMON CODE ***/
/*** Create holder table ***/
DROP TABLE IF EXISTS #tmpPositions
CREATE TABLE #tmpPositions (id int identity, instr varchar(max), posVal varchar(5), row int, col int
	, posTL int DEFAULT 0, posTC int DEFAULT 0, posTR int DEFAULT 0, posCL int DEFAULT 0, posCR int DEFAULT 0, posBL int DEFAULT 0, posBC int DEFAULT 0, posBR int DEFAULT 0, surroundCount int DEFAULT 0)

/*** Setup Loop ***/
DECLARE @thisRow int = 1
DECLARE @totalRows int = (SELECT MAX(id) FROM #tmpInstructions) --(SELECT LEN(instr) FROM #tmpInstructions WHERE id = 1)

WHILE @thisRow <= @totalRows
BEGIN

	/*** Populate individual cell list ***/
	DECLARE @inpStr varchar(max) 
	
	SELECT @inpStr = instr
	FROM #tmpInstructions
	WHERE id = @thisRow

	INSERT INTO #tmpPositions ( instr, posVal, row, col )
		SELECT @inpStr, SUBSTRING(@inpStr, N.Number, 1), @thisRow, N.Number
		FROM
			(
				SELECT ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS Number
				FROM sys.all_objects -- Any large table can be used to generate numbers
			) AS N
		WHERE
			N.Number <= LEN(@inpStr)
		ORDER BY N.Number
	/************************************/

	/**** NEXT RECORD ****/
	SET @thisRow = @thisRow+1
END

--SELECT * FROM #tmpPositions

/**********************************************************************/

/* PART 1 */
/*
/*** Mark rows with surrounding rolls ***/
/*** Has @ Top Left ***/
UPDATE #tmpPositions 
SET posTL = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col-1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Top Center ***/
UPDATE #tmpPositions 
SET posTC = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Top Right ***/
UPDATE #tmpPositions 
SET posTR = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col+1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Center Left ***/
UPDATE #tmpPositions 
SET posCL = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row AND tp2.col=tp.col-1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Center Right ***/
UPDATE #tmpPositions 
SET posCR = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row AND tp2.col=tp.col+1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Bottom Left ***/
UPDATE #tmpPositions 
SET posBL = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col-1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Bottom Center ***/
UPDATE #tmpPositions 
SET posBC = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** Has @ Bottom Right ***/
UPDATE #tmpPositions 
SET posBR = 1
WHERE id IN (
	SELECT tp.id--, tp.row, tp.col
	FROM #tmpPositions tp
	INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col+1
		AND tp2.posVal = '@'
	WHERE tp.posVal = '@'
)

/*** UPDATE COUNTS ***/
UPDATE #tmpPositions
SET surroundCount = posTL+posTC+posTR+posCL+posCR+posBL+posBC+posBR

/****************************************/


/*** How many rolls have 3 or fewer other rolls next to them? ***/
SELECT COUNT(*) AS cnt FROM #tmpPositions WHERE posVal = '@' AND surroundCount < 4

*/
/* 
1491 = That's the right answer! You are one gold star closer to decorating the North Pole. [Continue to Part Two]
*/

/**********************************************************************/

/* PART 2 */

--SELECT * FROM #tmpPositions
/*** Create table to track final results. ***/
DROP TABLE IF EXISTS #tmpRemovalCounts
CREATE TABLE #tmpRemovalCounts (cnt int)

/*** I need to loop through all the records and count the number of removals.  ***/

DECLARE @breakLoop bit = 0
DECLARE @removalCount int

WHILE @breakLoop = 0
BEGIN

	/*** BULK UPDATE ALL ROWS ***/

	/*** Reset Surrounding Positions ***/
	UPDATE #tmpPositions SET posTL=0, posTC=0, posTR=0, posCL=0, posCR=0, posBL=0, posBC=0, posBR=0

	/*** Has @ Top Left ***/
	UPDATE #tmpPositions 
	SET posTL = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col-1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)

	/*** Has @ Top Center ***/
	UPDATE #tmpPositions 
	SET posTC = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)
		
	/*** Has @ Top Right ***/
	UPDATE #tmpPositions 
	SET posTR = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row-1 AND tp2.col=tp.col+1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)
		
	/*** Has @ Center Left ***/
	UPDATE #tmpPositions 
	SET posCL = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row AND tp2.col=tp.col-1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)

	/*** Has @ Center Right ***/
	UPDATE #tmpPositions 
	SET posCR = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row AND tp2.col=tp.col+1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)

	/*** Has @ Bottom Left ***/
	UPDATE #tmpPositions 
	SET posBL = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col-1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)

	/*** Has @ Bottom Center ***/
	UPDATE #tmpPositions 
	SET posBC = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)

	/*** Has @ Bottom Right ***/
	UPDATE #tmpPositions 
	SET posBR = 1
	WHERE id IN (
		SELECT tp.id--, tp.row, tp.col
		FROM #tmpPositions tp
		INNER JOIN #tmpPositions tp2 ON tp2.row=tp.row+1 AND tp2.col=tp.col+1
			AND tp2.posVal = '@'
		WHERE tp.posVal = '@'
		)


	/*** UPDATE COUNTS ***/
	UPDATE #tmpPositions
	SET surroundCount = posTL+posTC+posTR+posCL+posCR+posBL+posBC+posBR


	/*** UPDATE val IF ROLL CAN BE REMOVED ***/
	UPDATE #tmpPositions
	SET posVal = 'x'
	WHERE surroundCount < 4 AND posVal = '@'

	SELECT @removalCount = COUNT(*) FROM #tmpPositions WHERE posVal = 'x'

	/*** Count updated positions. ***/
	INSERT INTO #tmpRemovalCounts VALUES ( @removalCount )

	UPDATE #tmpPositions 
	SET posVal = 'i'
	WHERE posVal = 'x'

--SELECT * FROM #tmpPositions

	/**** BREAK OUT OF LOOP ****/
	IF (@removalCount=0)
	BEGIN
		SET @breakLoop = 1
	END
END

--SELECT * FROM #tmpPositions
SELECT SUM(cnt) FROM #tmpRemovalCounts


/* 
First shot = No guess. Realized logic error before submitting results.
8013 = That's the right answer! You are one gold star closer to decorating the North Pole. You have completed Day 4!
*/

/**********************************************************************/

/*
NOTES:
Same deal. Initial parse of input.

Part 1:
This one was very similar to puzzles done in previous years. It's just figuring out adjacency on a grid. 

I assumed that Part 2 would include some shared code I used to calculate rows, columns and adjacency. This'll probably 
bite me in a minute. I'll probably have to change it for Part 2.

My first attempt was correct. 

On to Part 2.


Part 2:
I knew it. I can still use the same code, but I had to move my code to update the individual rows for surrounding rolls. I 
had to move these down into the Part sections themselves. To be honest, I really should move these into their own specific
function or sproc. I haven't done this because I've been trying to do these in their own self-contained scripts. But since
I have called BIFs, I probably should create my own functions as well. That would probably be smarter. 
...........
READ THE DIRECTIONS! I need to remove all possible rolls each iteration, then recalculate to see which others can be removed. 
Some will eventually stop at <3 adjacents, and will no longer be able to be removed. Instructions say to count how many 
can be removed each iteration until no more can be removed. 
...........
I reorganized my code to hit the proper adjacency removals. Then had to do a little cleanup to make sure it looped correctly. 
Basically, I need to keep looping until I no longer get results. I've got code, so let's see if it works.
...........
Woot! Correct Answer! Day 4 is the first day I completed both parts. I need to go back and complete Part 2 for the other days.


Lesson Learned:
Read directions carefully before starting. :-/

*/

/**********************************************************************/

/********************
--- Day 4: Printing Department ---
You ride the escalator down to the printing department. They're clearly getting ready for Christmas; they have lots of large rolls of paper everywhere, and there's even a massive printer in the corner (to handle the really big print jobs).

Decorating here will be easy: they can make their own decorations. What you really need is a way to get further into the North Pole base while the elevators are offline.

"Actually, maybe we can help with that," one of the Elves replies when you ask for help. "We're pretty sure there's a cafeteria on the other side of the back wall. If we could break through the wall, you'd be able to keep moving. It's too bad all of our forklifts are so busy moving those big rolls of paper around."

If you can optimize the work the forklifts are doing, maybe they would have time to spare to break through the wall.

The rolls of paper (@) are arranged on a large grid; the Elves even have a helpful diagram (your puzzle input) indicating where everything is located.

For example:

..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@.
The forklifts can only access a roll of paper if there are fewer than four rolls of paper in the eight adjacent positions. If you can figure out which rolls of paper the forklifts can access, they'll spend less time looking and more time breaking down the wall to the cafeteria.

In this example, there are 13 rolls of paper that can be accessed by a forklift (marked with x):

..xx.xx@x.
x@@.@.@.@@
@@@@@.x.@@
@.@@@@..@.
x@.@@@@.@x
.@@@@@@@.@
.@.@.@.@@@
x.@@@.@@@@
.@@@@@@@@.
x.x.@@@.x.
Consider your complete diagram of the paper roll locations. How many rolls of paper can be accessed by a forklift?


--- Part Two ---
Now, the Elves just need help accessing as much of the paper as they can.

Once a roll of paper can be accessed by a forklift, it can be removed. Once a roll of paper is removed, the forklifts might be able to access more rolls of paper, which they might also be able to remove. How many total rolls of paper could the Elves remove if they keep repeating this process?

Starting with the same example as above, here is one way you could remove as many rolls of paper as possible, using highlighted @ to indicate that a roll of paper is about to be removed, and using x to indicate that a roll of paper was just removed:

Initial state:
..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@.

Remove 13 rolls of paper:
..xx.xx@x.
x@@.@.@.@@
@@@@@.x.@@
@.@@@@..@.
x@.@@@@.@x
.@@@@@@@.@
.@.@.@.@@@
x.@@@.@@@@
.@@@@@@@@.
x.x.@@@.x.

Remove 12 rolls of paper:
.......x..
.@@.x.x.@x
x@@@@...@@
x.@@@@..x.
.@.@@@@.x.
.x@@@@@@.x
.x.@.@.@@@
..@@@.@@@@
.x@@@@@@@.
....@@@...

Remove 7 rolls of paper:
..........
.x@.....x.
.@@@@...xx
..@@@@....
.x.@@@@...
..@@@@@@..
...@.@.@@x
..@@@.@@@@
..x@@@@@@.
....@@@...

Remove 5 rolls of paper:
..........
..x.......
.x@@@.....
..@@@@....
...@@@@...
..x@@@@@..
...@.@.@@.
..x@@.@@@x
...@@@@@@.
....@@@...

Remove 2 rolls of paper:
..........
..........
..x@@.....
..@@@@....
...@@@@...
...@@@@@..
...@.@.@@.
...@@.@@@.
...@@@@@x.
....@@@...

Remove 1 roll of paper:
..........
..........
...@@.....
..x@@@....
...@@@@...
...@@@@@..
...@.@.@@.
...@@.@@@.
...@@@@@..
....@@@...

Remove 1 roll of paper:
..........
..........
...x@.....
...@@@....
...@@@@...
...@@@@@..
...@.@.@@.
...@@.@@@.
...@@@@@..
....@@@...

Remove 1 roll of paper:
..........
..........
....x.....
...@@@....
...@@@@...
...@@@@@..
...@.@.@@.
...@@.@@@.
...@@@@@..
....@@@...

Remove 1 roll of paper:
..........
..........
..........
...x@@....
...@@@@...
...@@@@@..
...@.@.@@.
...@@.@@@.
...@@@@@..
....@@@...

Stop once no more rolls of paper are accessible by a forklift. In this example, a total of 43 rolls of paper can be removed.

Start with your original diagram. How many rolls of paper in total can be removed by the Elves and their forklifts?

********************/